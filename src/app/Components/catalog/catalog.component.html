<div class="container pad">
    <h1>Catálogo de libros</h1>
    <hr />
    <div class="row py-2 justify-content-center">
      <button class="btn btnVerde" (click)="abrirFiltro()">Filtrar</button>
    </div>
  
    <div class="row">
      <div *ngFor="let libro of libros" class="col-12 col-md-4 mb-4">
        <div class="card h-100">
          <img [src]="libro.imagenPortadaBase64" alt="Portada del libro" class="card-img-top" />
          <div class="card-body">
            <h5 class="card-title">{{ libro.titulo }}</h5>
            <p class="card-text"><strong>Autor:</strong> {{ libro.nombreAutor }}</p>
            <p class="card-text"><strong>Editorial:</strong> {{ libro.editorial }}</p>
            <p class="card-text"><strong>Fecha de Publicación:</strong> {{ libro.fechaPublicacion | date: 'dd/MM/yyyy' }}</p>
            <p class="card-text"><strong>Género:</strong> {{ getGeneroDescripcion(libro) }}</p>
            <p class="card-text"><strong>Precio (alquiler por día):</strong> {{ libro.precioAlquiler | currency: 'ARS': 'symbol': '1.0-0' }}</p>
            <p class="card-text"><strong>ISBN:</strong> {{ libro.codigoIsbn.trim() }}</p>
            <p class="card-text">{{ libro.descripcion }}</p>
            <p class="card-text"><small class="text-muted">Ubicación: {{ libro.codUbicacion }}</small></p>
          </div>
        </div>
      </div>
    </div>
  
    <nav aria-label="Page navigation">
      <ul class="pagination justify-content-center">
        <li class="page-item" [class.disabled]="paginaActual === 1">
          <button class="page-link" (click)="cambiarPagina(paginaActual - 1)">Anterior</button>
        </li>
        <li class="page-item">
          <span class="page-link">Página {{ paginaActual }}</span>
        </li>
        <li class="page-item" [class.disabled]="libros.length < librosPorPagina">
          <button class="page-link" (click)="cambiarPagina(paginaActual + 1)">Siguiente</button>
        </li>
      </ul>
    </nav>
  
    <div class="modal" [ngClass]="{'show': mostrarFiltros, 'd-none': !mostrarFiltros}">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Filtros</h5>
              <button type="button" class="close" (click)="cerrarFiltro()">&times;</button>
            </div>
            <div class="modal-body">
              <form (ngSubmit)="aplicarFiltros()">
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Título</label>
                      <input type="text" class="form-control" [(ngModel)]="filtros.titulo" name="titulo">
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Autor</label>
                      <input type="text" class="form-control" [(ngModel)]="filtros.autos" name="autos">
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Editorial</label>
                      <input type="text" class="form-control" [(ngModel)]="filtros.editorial" name="editorial">
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Fecha de Publicación Desde</label>
                      <input type="date" class="form-control" [(ngModel)]="filtros.fechaPublicacionDesde" name="fechaPublicacionDesde">
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Fecha de Publicación Hasta</label>
                      <input type="date" class="form-control" [(ngModel)]="filtros.fechaPublicacionHasta" name="fechaPublicacionHasta">
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Género</label>
                      <select class="form-control" [(ngModel)]="filtros.idGenero" name="idGenero">
                        <option *ngFor="let genero of generos" [value]="genero.idGenero">{{ genero.descripcion }}</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Género (Otro)</label>
                      <input type="text" class="form-control" [(ngModel)]="filtros.nGenero" name="nGenero">
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Precio Desde</label>
                      <input type="number" class="form-control" [(ngModel)]="filtros.precioDesde" name="precioDesde">
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Precio Hasta</label>
                      <input type="number" class="form-control" [(ngModel)]="filtros.precioHasta" name="precioHasta">
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>ISBN</label>
                      <input type="text" class="form-control" [(ngModel)]="filtros.isbn" name="isbn">
                    </div>
                  </div>
                </div>
      
                <div class="row py-2 justify-content-center">
                  <button type="submit" class="btn btnVerde">Aplicar</button>
                </div>
                <div class="row py-2 justify-content-center">
                  <button type="button" class="btn btnAmarillo" (click)="limpiarFiltros()">Limpiar</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
  </div>  